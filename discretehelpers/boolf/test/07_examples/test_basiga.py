from discretehelpers.set_part import SetPart

from discretehelpers.boolf.examples import basiga, basiga_fs


def test():
    assert basiga.fullspots == basiga_fs
    assert basiga.splits == [
        ({1, 3, 5, 7}, {0, 2, 4, 6, 8, 10, 74, 12, 138, 14, 202, 24, 26, 28, 30, 42, 106}),  # a 0
        ({2, 3, 6, 7, 10, 42, 74, 106, 14, 138, 202, 26, 30}, {0, 1, 4, 5, 8, 12, 24, 28}),  # b 1
        ({4, 5, 6, 7, 12, 14, 28, 30}, {0, 1, 2, 3, 8, 10, 42, 74, 106, 138, 202, 24, 26}),  # c 2
        ({8, 10, 42, 12, 74, 14, 106, 138, 202, 24, 26, 28, 30}, {0, 1, 2, 3, 4, 5, 6, 7}),  # d 3
        ({24, 26, 28, 30}, {0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 74, 12, 138, 14, 202, 42, 106}),  # e 4
        ({42, 106}, {0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 74, 12, 138, 14, 202, 24, 26, 28, 30}),  # f 5
        ({202, 74, 106}, {0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 138, 12, 14, 24, 26, 28, 30, 42}),  # g 6
        ({202, 138}, {0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 74, 12, 14, 24, 26, 28, 30, 42, 106})   # h 7
    ]
    assert basiga.splits_overlap_counts == {(0, 1): 4, (0, 2): 4, (0, 3): 3, (0, 4): 3, (0, 5): 3, (0, 6): 3, (0, 7): 3, (1, 2): 4, (1, 3): 4, (1, 4): 4, (1, 5): 3, (1, 6): 3, (1, 7): 3, (2, 3): 4, (2, 4): 4, (2, 5): 3, (2, 6): 3, (2, 7): 3, (3, 4): 3, (3, 5): 3, (3, 6): 3, (3, 7): 3, (4, 5): 3, (4, 6): 3, (4, 7): 3, (5, 6): 4, (5, 7): 3, (6, 7): 4}
    assert basiga.split_pairs_with_3_overlaps == [(0, 3), (0, 4), (0, 5), (0, 6), (0, 7), (1, 5), (1, 6), (1, 7), (2, 5), (2, 6), (2, 7), (3, 4), (3, 5), (3, 6), (3, 7), (4, 5), (4, 6), (4, 7), (5, 7)]
    assert basiga.bundles == [[0, 1, 2, 3, 4], [5, 6, 7]]
    assert basiga.bundle_overlap_counts == {
        (0, 1, 2, 3, 4): {
            3: [(0, 3), (0, 4), (3, 4)],  # (a, d), (a, e), (d, e)
            4: [(0, 1), (0, 2), (1, 2), (1, 3), (1, 4), (2, 3), (2, 4)]
        },
        (5, 6, 7): {
            3: [(5, 7)],  # (f, h)
            4: [(5, 6), (6, 7)]
        }
    }
    assert basiga.bundle_grid_partitions == {
        (0, 1, 2, 3, 4): SetPart([[0, 3, 4]]),  # [a, d, e]
        (5, 6, 7): SetPart([[5, 7]])  # [f, h]
    }
    assert basiga.gapless_boolf == basiga
